{% load episodes %}
{% with podcast=episode.podcast duration=episode.get_duration_in_seconds episode_url=episode.get_absolute_url %}
{% is_playing episode as is_episode_playing %}
<div class="flex justify-between items-center mb-3 p-2 border  border-gray-500 hover:border-blue-500"
     id="episode-{{ episode.id }}">
  <div class="w-full">
    <div class="mb-2 flex items-center text-sm md:text-base flex-wrap tracking-tight leading-tight">
      <a href="{{ episode_url }}"
         class="block font-semibold hover:text-gray-300"
         title="{{ episode.title|stripentities }}">{{ episode.title|stripentities|truncatechars:120 }}</a>
      {% if episode.explicit %}
      {% include "_explicit.html" with css_class="ml-2" %}
      {% endif %}
    </div>

    <div class="flex items-center">
      <a href="{{ podcast_url|default:podcast.get_absolute_url }}">
        <turbo-frame id="podcast-cover-image-{{ podcast.id }}"
                     src="{% url 'podcasts:podcast_cover_image' podcast.id %}">
          {% include "podcasts/_podcast_cover_image.html" with lazy=True %}
        </turbo-frame>
      </a>
      <div class="leading-tight w-full ml-2">

        <div class="flex items-center">
          {% include "episodes/_play_buttons.html" with css_class="mr-2" %}
          <div class="w-full">

            <div class="flex items-center justify-between lg:justify-start text-sm">
              <div class="md:flex items-center">
                <div title="Date Published"
                     class="font-semibold text-gray-100 mr-2"> {{ episode.pub_date|date }} </div>
                <div title="Duration"
                     class="font-semibold text-gray-100">
                  {% include "episodes/_current_time.html" %}
                </div>
              </div>
              {% block extra_info %}{% endblock %}
            </div>

          </div>
        </div>

      </div>
    </div>
  </div>
  {% block extra_buttons %}{% endblock %}
</div>
{% endwith %}
